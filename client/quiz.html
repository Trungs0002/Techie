<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Làm bài trắc nghiệm - Techie</title>
    <link rel="stylesheet" href="css/quiz.css" />
  </head>
  <body>
    <header class="quiz-header">
      <div class="header-left">
        <button class="back-btn" onclick="window.location.href='dashboard.html'">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
          Quay lại
        </button>
        <h1>Làm bài trắc nghiệm CNTT</h1>
      </div>
      <div class="header-right">
        <div class="badge" title="Thời gian câu hỏi">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          <span id="per-question-timer">--:--</span>
        </div>
        <div class="badge primary" title="Tổng thời gian">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
          <span id="total-timer">--:--</span>
        </div>
      </div>
    </header>

    <main class="quiz-container">
      <div id="message-area" class="message hidden"></div>

      <section class="quiz-status">
        <div class="status-item">
          <span class="label">Câu hỏi</span>
          <div class="value-wrapper" style="display: flex; align-items: center; gap: 8px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
            <span class="value" id="question-progress">0 / 0</span>
          </div>
        </div>
        <div class="status-item">
          <span class="label">Điểm số</span>
          <div class="value-wrapper" style="display: flex; align-items: center; gap: 8px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
            <span class="value" id="score">0</span>
          </div>
        </div>
        <div class="status-item">
          <span class="label">Chính xác</span>
          <div class="value-wrapper" style="display: flex; align-items: center; gap: 8px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            <span class="value" id="correct-count">0</span>
          </div>
        </div>
      </section>

      <section class="quiz-card" id="quiz-card">
        <div class="quiz-body">
          <div class="question-meta">
            <span class="pill" id="question-type">---</span>
            <span class="pill hidden" id="question-subject">---</span>
          </div>
          <h2 class="question-text" id="question-text">Đang tải câu hỏi...</h2>
          <div class="options" id="options-container">
            <!-- Options will be injected here by JS -->
          </div>
        </div>
        <div class="quiz-actions">
          <button class="secondary-btn" id="skip-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
            Bỏ qua
          </button>
          <button class="primary-btn" id="next-btn">
            Câu tiếp
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
          </button>
        </div>
      </section>

      <section class="result-card hidden" id="result-card">
        <h2>Kết quả bài thi</h2>
        <div class="result-grid">
          <div class="result-item">
            <span class="label">Tổng điểm</span>
            <span class="value" id="result-score">0</span>
          </div>
          <div class="result-item">
            <span class="label">Số câu đúng</span>
            <span class="value" id="result-correct">0</span>
          </div>
          <div class="result-item">
            <span class="label">Số câu sai</span>
            <span class="value" id="result-wrong">0</span>
          </div>
          <div class="result-item">
            <span class="label">Thời gian làm bài</span>
            <span class="value" id="result-time">--:--</span>
          </div>
        </div>
        <div class="result-actions">
          <button class="secondary-btn" onclick="window.location.reload()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 4v6h-6"/><path d="M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
            Làm lại
          </button>
          <button
            class="primary-btn"
            onclick="window.location.href='create-question.html'"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
            Thêm câu hỏi
          </button>
        </div>
      </section>
    </main>

    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="spinner"></div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/quiz.js"></script>
  </body>
</html>