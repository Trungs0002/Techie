<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Làm bài thi - QuizMaster</title>
  
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/components.css">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* Prevent accidental navigation */
    body {
      overscroll-behavior: none;
    }

    /* Question palette grid */
    .question-palette {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(48px, 1fr));
      gap: 0.5rem;
    }

    /* Question number button */
    .question-btn {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 0.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .question-btn:hover {
      transform: scale(1.05);
    }

    /* Question states */
    .question-btn.answered {
      background-color: #10B981;
      color: white;
    }

    .question-btn.current {
      background-color: #3B82F6;
      color: white;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }

    .question-btn.marked {
      background-color: #F59E0B;
      color: white;
    }

    .question-btn.unanswered {
      background-color: #E5E7EB;
      color: #374151;
    }

    /* Timer warning animation */
    @keyframes pulse-red {
      0%, 100% { color: #EF4444; }
      50% { color: #DC2626; }
    }

    .timer-warning {
      animation: pulse-red 1s infinite;
    }

    /* Full screen mode */
    .fullscreen-mode {
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: white;
      overflow-y: auto;
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Quiz Header (Sticky) -->
  <header class="bg-white shadow-sm sticky top-0 z-40">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between h-16">
        <!-- Exam Info -->
        <div class="flex items-center gap-4">
          <i class="fas fa-graduation-cap text-2xl text-blue-600"></i>
          <div class="hidden md:block">
            <h1 class="font-semibold text-gray-900" id="examTitle">Đang tải...</h1>
            <p class="text-sm text-gray-600" id="examSubject">Môn học</p>
          </div>
        </div>

        <!-- Timer & Actions -->
        <div class="flex items-center gap-4">
          <!-- Timer -->
          <div class="flex items-center gap-2 px-4 py-2 bg-blue-50 rounded-lg">
            <i class="fas fa-clock text-blue-600"></i>
            <span class="font-mono font-bold text-lg" id="timer">00:00</span>
          </div>

          <!-- Actions -->
          <div class="flex items-center gap-2">
            <button id="fullscreenBtn" class="btn btn-secondary btn-sm" title="Toàn màn hình">
              <i class="fas fa-expand"></i>
            </button>
            <button id="submitBtn" class="btn btn-danger btn-sm">
              <i class="fas fa-paper-plane"></i>
              <span class="hidden md:inline">Nộp bài</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Exam Info -->
      <div class="md:hidden pb-3">
        <h2 class="font-semibold text-gray-900" id="examTitleMobile">Đang tải...</h2>
        <p class="text-sm text-gray-600" id="examSubjectMobile">Môn học</p>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-6">
    <div class="grid lg:grid-cols-4 gap-6">
      <!-- Questions Panel (Main Content) -->
      <div class="lg:col-span-3 space-y-6">
        <!-- Question Card -->
        <div class="card bg-white">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold text-gray-900">
              Câu <span id="currentQuestionNumber">1</span> / <span id="totalQuestions">0</span>
            </h2>
            <button id="markBtn" class="btn btn-secondary btn-sm">
              <i class="fas fa-flag"></i>
              <span id="markText">Đánh dấu</span>
            </button>
          </div>

          <!-- Question Content -->
          <div id="questionContent" class="mb-6">
            <div class="animate-pulse">
              <div class="h-4 bg-gray-300 rounded w-3/4 mb-2"></div>
              <div class="h-4 bg-gray-300 rounded w-full"></div>
            </div>
          </div>

          <!-- Question Image (if exists) -->
          <div id="questionImage" class="hidden mb-6">
            <img src="" alt="Question image" class="max-w-full rounded-lg shadow-sm">
          </div>

          <!-- Answer Options -->
          <div id="answerOptions" class="space-y-3">
            <!-- Will be populated by JavaScript -->
          </div>

          <!-- Navigation Buttons -->
          <div class="flex items-center justify-between mt-6 pt-6 border-t border-gray-200">
            <button id="prevBtn" class="btn btn-secondary" disabled>
              <i class="fas fa-chevron-left"></i>
              Câu trước
            </button>

            <div class="flex gap-2">
              <button id="clearBtn" class="btn btn-secondary">
                <i class="fas fa-eraser"></i>
                Xóa đáp án
              </button>
            </div>

            <button id="nextBtn" class="btn btn-primary">
              Câu sau
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
        </div>

        <!-- Instructions (Collapsible) -->
        <div class="card bg-blue-50 border border-blue-200">
          <button class="flex items-center justify-between w-full text-left" onclick="toggleInstructions()">
            <div class="flex items-center gap-2">
              <i class="fas fa-info-circle text-blue-600"></i>
              <span class="font-semibold text-blue-900">Hướng dẫn làm bài</span>
            </div>
            <i class="fas fa-chevron-down text-blue-600" id="instructionsIcon"></i>
          </button>
          <div id="instructionsContent" class="hidden mt-3 text-sm text-blue-800 space-y-1">
            <p>• Chọn 1 đáp án cho mỗi câu hỏi</p>
            <p>• Có thể đánh dấu câu hỏi để xem lại sau</p>
            <p>• Bài thi tự động lưu sau mỗi 30 giây</p>
            <p>• Bài thi sẽ tự động nộp khi hết giờ</p>
            <p>• Không thoát khỏi trang trong khi làm bài</p>
          </div>
        </div>
      </div>

      <!-- Question Palette Sidebar -->
      <div class="lg:col-span-1">
        <div class="card bg-white sticky top-24">
          <h3 class="font-semibold text-gray-900 mb-4">Danh sách câu hỏi</h3>

          <!-- Legend -->
          <div class="grid grid-cols-2 gap-2 mb-4 text-xs">
            <div class="flex items-center gap-2">
              <div class="w-4 h-4 bg-green-500 rounded"></div>
              <span>Đã trả lời</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="w-4 h-4 bg-gray-300 rounded"></div>
              <span>Chưa trả lời</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="w-4 h-4 bg-blue-500 rounded"></div>
              <span>Đang làm</span>
            </div>
            <div class="flex items-center gap-2">
              <div class="w-4 h-4 bg-yellow-500 rounded"></div>
              <span>Đánh dấu</span>
            </div>
          </div>

          <!-- Question Grid -->
          <div id="questionPalette" class="question-palette">
            <!-- Will be populated by JavaScript -->
          </div>

          <!-- Summary -->
          <div class="mt-4 pt-4 border-t border-gray-200 space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-600">Đã trả lời:</span>
              <span class="font-semibold text-green-600" id="answeredCount">0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Chưa trả lời:</span>
              <span class="font-semibold text-gray-600" id="unansweredCount">0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Đánh dấu:</span>
              <span class="font-semibold text-yellow-600" id="markedCount">0</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Submit Confirmation Modal -->
  <div id="submitModal" class="hidden modal-overlay">
    <div class="modal-content max-w-lg">
      <div class="modal-header">
        <h2 class="modal-title">Xác nhận nộp bài</h2>
      </div>
      <div class="modal-body">
        <div class="space-y-4">
          <p class="text-gray-700">Bạn có chắc chắn muốn nộp bài không?</p>
          
          <div class="bg-gray-50 rounded-lg p-4 space-y-2">
            <div class="flex justify-between">
              <span class="text-gray-600">Tổng số câu:</span>
              <span class="font-semibold" id="modalTotalQuestions">0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Đã trả lời:</span>
              <span class="font-semibold text-green-600" id="modalAnswered">0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Chưa trả lời:</span>
              <span class="font-semibold text-red-600" id="modalUnanswered">0</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Thời gian còn lại:</span>
              <span class="font-semibold text-blue-600" id="modalTimeLeft">00:00</span>
            </div>
          </div>

          <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <p class="text-sm">Sau khi nộp bài, bạn không thể chỉnh sửa câu trả lời.</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeSubmitModal()">
          <i class="fas fa-times"></i>
          Hủy
        </button>
        <button class="btn btn-primary" id="confirmSubmitBtn">
          <i class="fas fa-check"></i>
          Xác nhận nộp bài
        </button>
      </div>
    </div>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 text-center">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
      <p class="text-gray-700 font-medium">Đang xử lý...</p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/utils.js"></script>
  <script src="/assets/js/api.js"></script>
  <script src="/assets/js/auth.js"></script>
  
  <script>
    // Require authentication
    if (!Auth.requireAuth()) {
      // Will redirect to login
    }

    // Get exam ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const examId = urlParams.get('exam');

    if (!examId) {
      Utils.showToast('Không tìm thấy đề thi', 'error');
      setTimeout(() => window.location.href = '/pages/exams.html', 2000);
    }

    // Quiz State
    let quizData = {
      exam: null,
      questions: [],
      currentQuestionIndex: 0,
      answers: {}, // questionId: answerIndex
      markedQuestions: new Set(),
      startTime: null,
      timeLeft: 0, // in seconds
      duration: 0 // in minutes
    };

    let timerInterval = null;
    let autoSaveInterval = null;

    // Load exam and questions
    async function loadExam() {
      try {
        Utils.showLoading('Đang tải đề thi...');

        // Check for saved progress in localStorage
        const savedProgress = localStorage.getItem(`quiz_${examId}`);
        
        // Call quiz/start API with examId
        const response = await API.post('/quiz/start', { examId });
        
        // Response structure: {success: true, data: {exam, questions, startTime}}
        const data = response.data || response;
        quizData.exam = data.exam;
        quizData.questions = data.questions || [];
        quizData.duration = data.exam.duration || 30; // Default 30 minutes
        quizData.startTime = new Date(data.startTime || Date.now());
        
        // Restore saved progress if exists
        if (savedProgress) {
          try {
            const saved = JSON.parse(savedProgress);
            if (saved.answers) quizData.answers = saved.answers;
            if (saved.markedQuestions) quizData.markedQuestions = new Set(saved.markedQuestions);
            if (saved.currentQuestion !== undefined) quizData.currentQuestionIndex = saved.currentQuestion;
            // Calculate remaining time based on saved time
            if (saved.savedAt && saved.startTime) {
              const elapsedMs = saved.savedAt - saved.startTime;
              const elapsedSec = Math.floor(elapsedMs / 1000);
              quizData.timeLeft = Math.max(0, (quizData.duration * 60) - elapsedSec);
            } else {
              quizData.timeLeft = quizData.duration * 60;
            }
            console.log('Restored progress from localStorage');
          } catch (e) {
            console.error('Error restoring saved progress:', e);
            quizData.timeLeft = quizData.duration * 60;
          }
        } else {
          quizData.timeLeft = quizData.duration * 60; // Convert to seconds
        }

        // Update UI
        document.getElementById('examTitle').textContent = quizData.exam.title || 'Đề thi';
        document.getElementById('examTitleMobile').textContent = quizData.exam.title || 'Đề thi';
        document.getElementById('examSubject').textContent = data.exam.subject?.name || 'Môn học';
        document.getElementById('examSubjectMobile').textContent = data.exam.subject?.name || 'Môn học';
        document.getElementById('totalQuestions').textContent = quizData.questions.length;

        // Initialize
        renderQuestionPalette();
        renderCurrentQuestion();
        startTimer();
        startAutoSave();

        Utils.hideLoading();

        // Prevent page unload
        window.addEventListener('beforeunload', handleBeforeUnload);

      } catch (error) {
        console.error('Error loading exam:', error);
        Utils.hideLoading();
        Utils.showToast(error.message || 'Không thể tải đề thi. Vui lòng thử lại.', 'error');
        
        // Redirect back to exams page after 2 seconds
        setTimeout(() => {
          window.location.href = '/pages/exams.html';
        }, 2000);
      }
    }

    // Render question palette
    function renderQuestionPalette() {
      const palette = document.getElementById('questionPalette');
      
      palette.innerHTML = quizData.questions.map((q, index) => {
        const isAnswered = quizData.answers[q._id || index] !== undefined;
        const isCurrent = index === quizData.currentQuestionIndex;
        const isMarked = quizData.markedQuestions.has(index);
        
        let className = 'question-btn ';
        if (isCurrent) className += 'current';
        else if (isMarked) className += 'marked';
        else if (isAnswered) className += 'answered';
        else className += 'unanswered';
        
        return `
          <button class="${className}" onclick="goToQuestion(${index})" title="Câu ${index + 1}">
            ${index + 1}
          </button>
        `;
      }).join('');
      
      updateSummary();
    }

    // Render current question
    function renderCurrentQuestion() {
      const question = quizData.questions[quizData.currentQuestionIndex];
      if (!question) return;

      const questionId = question._id || quizData.currentQuestionIndex;
      
      // Update question number
      document.getElementById('currentQuestionNumber').textContent = quizData.currentQuestionIndex + 1;
      
      // Update question content
      document.getElementById('questionContent').innerHTML = `
        <div class="text-lg text-gray-900 leading-relaxed">${question.question || question.content}</div>
      `;
      
      // Show image if exists
      if (question.image) {
        document.getElementById('questionImage').classList.remove('hidden');
        document.getElementById('questionImage').querySelector('img').src = question.image;
      } else {
        document.getElementById('questionImage').classList.add('hidden');
      }
      
      // Render answer options
      const selectedAnswer = quizData.answers[questionId];
      const optionsContainer = document.getElementById('answerOptions');
      
      console.log('Rendering question:', {
        questionId,
        selectedAnswer,
        options: question.options
      });
      
      optionsContainer.innerHTML = (question.options || []).map((option, index) => {
        // Handle both string and object format
        const optionText = typeof option === 'string' ? option : (option?.text || option);
        const isSelected = selectedAnswer === optionText;
        const letter = String.fromCharCode(65 + index); // A, B, C, D
        
        return `
          <label class="flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${
            isSelected 
              ? 'border-blue-500 bg-blue-50 shadow-md' 
              : 'border-gray-200 hover:border-blue-300 hover:bg-gray-50'
          }">
            <input 
              type="radio" 
              name="answer" 
              value="${index}"
              ${isSelected ? 'checked' : ''}
              onchange="selectAnswer(${index})"
              class="mt-1 w-5 h-5 text-blue-600 cursor-pointer"
            >
            <div class="flex-1">
              <span class="font-semibold text-gray-700 mr-2">${letter}.</span>
              <span class="text-gray-900">${optionText}</span>
              ${isSelected ? '<i class="fas fa-check-circle text-blue-600 ml-2"></i>' : ''}
            </div>
          </label>
        `;
      }).join('');
      
      // Update mark button
      const isMarked = quizData.markedQuestions.has(quizData.currentQuestionIndex);
      document.getElementById('markText').textContent = isMarked ? 'Bỏ đánh dấu' : 'Đánh dấu';
      
      // Update navigation buttons
      document.getElementById('prevBtn').disabled = quizData.currentQuestionIndex === 0;
      document.getElementById('nextBtn').textContent = quizData.currentQuestionIndex === quizData.questions.length - 1 
        ? 'Nộp bài' 
        : 'Câu sau';
      
      // Update palette
      renderQuestionPalette();
    }

    // Select answer
    function selectAnswer(answerIndex) {
      const question = quizData.questions[quizData.currentQuestionIndex];
      const questionId = question._id || quizData.currentQuestionIndex;
      
      // Store answer text instead of index (backend expects text)
      const option = question.options[answerIndex];
      const answerText = typeof option === 'string' ? option : (option?.text || option);
      quizData.answers[questionId] = answerText;
      
      console.log('Answer selected:', {
        questionIndex: quizData.currentQuestionIndex,
        questionId,
        answerIndex,
        answerText,
        allAnswers: quizData.answers
      });
      
      // Save progress immediately after selecting answer
      saveProgress();
      
      // Update palette to show answered status
      renderQuestionPalette();
    }

    // Go to specific question
    function goToQuestion(index) {
      quizData.currentQuestionIndex = index;
      renderCurrentQuestion();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Navigation
    document.getElementById('prevBtn').addEventListener('click', () => {
      if (quizData.currentQuestionIndex > 0) {
        goToQuestion(quizData.currentQuestionIndex - 1);
      }
    });

    document.getElementById('nextBtn').addEventListener('click', () => {
      if (quizData.currentQuestionIndex < quizData.questions.length - 1) {
        goToQuestion(quizData.currentQuestionIndex + 1);
      } else {
        // Last question, show submit modal
        showSubmitModal();
      }
    });

    // Clear answer
    document.getElementById('clearBtn').addEventListener('click', () => {
      const questionId = quizData.questions[quizData.currentQuestionIndex]._id || quizData.currentQuestionIndex;
      delete quizData.answers[questionId];
      renderCurrentQuestion();
    });

    // Mark question
    document.getElementById('markBtn').addEventListener('click', () => {
      if (quizData.markedQuestions.has(quizData.currentQuestionIndex)) {
        quizData.markedQuestions.delete(quizData.currentQuestionIndex);
      } else {
        quizData.markedQuestions.add(quizData.currentQuestionIndex);
      }
      renderCurrentQuestion();
    });

    // Update summary
    function updateSummary() {
      const answered = Object.keys(quizData.answers).length;
      const total = quizData.questions.length;
      const unanswered = total - answered;
      const marked = quizData.markedQuestions.size;
      
      document.getElementById('answeredCount').textContent = answered;
      document.getElementById('unansweredCount').textContent = unanswered;
      document.getElementById('markedCount').textContent = marked;
    }

    // Timer
    function startTimer() {
      updateTimerDisplay();
      
      timerInterval = setInterval(() => {
        quizData.timeLeft--;
        updateTimerDisplay();
        
        // Warning at 5 minutes
        if (quizData.timeLeft === 300) {
          Utils.showToast('Còn 5 phút nữa hết giờ!', 'warning');
          document.getElementById('timer').classList.add('timer-warning');
        }
        
        // Auto submit at 0
        if (quizData.timeLeft <= 0) {
          clearInterval(timerInterval);
          Utils.showToast('Hết giờ! Đang tự động nộp bài...', 'warning');
          setTimeout(() => submitQuiz(true), 1000);
        }
      }, 1000);
    }

    function updateTimerDisplay() {
      const minutes = Math.floor(quizData.timeLeft / 60);
      const seconds = quizData.timeLeft % 60;
      const display = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      document.getElementById('timer').textContent = display;
    }

    // Auto save
    function startAutoSave() {
      // Save to localStorage only (backend doesn't support auto-save)
      autoSaveInterval = setInterval(() => {
        saveProgress();
      }, CONFIG.QUIZ_SETTINGS.AUTO_SAVE_INTERVAL);
    }

    function saveProgress() {
      try {
        // Save progress to localStorage for recovery
        localStorage.setItem(`quiz_${examId}`, JSON.stringify({
          answers: quizData.answers,
          markedQuestions: Array.from(quizData.markedQuestions),
          timeLeft: quizData.timeLeft,
          currentQuestion: quizData.currentQuestion,
          startTime: quizData.startTime,
          savedAt: Date.now()
        }));
        console.log('Progress saved to localStorage');
      } catch (error) {
        console.error('Error saving progress:', error);
      }
    }

    // Submit modal
    function showSubmitModal() {
      const answered = Object.keys(quizData.answers).length;
      const unanswered = quizData.questions.length - answered;
      
      document.getElementById('modalTotalQuestions').textContent = quizData.questions.length;
      document.getElementById('modalAnswered').textContent = answered;
      document.getElementById('modalUnanswered').textContent = unanswered;
      document.getElementById('modalTimeLeft').textContent = document.getElementById('timer').textContent;
      
      document.getElementById('submitModal').classList.remove('hidden');
    }

    function closeSubmitModal() {
      document.getElementById('submitModal').classList.add('hidden');
    }

    document.getElementById('submitBtn').addEventListener('click', showSubmitModal);
    document.getElementById('confirmSubmitBtn').addEventListener('click', () => {
      closeSubmitModal();
      submitQuiz(false);
    });

    // Submit quiz
    async function submitQuiz(isAutoSubmit = false) {
      try {
        document.getElementById('loadingOverlay').classList.remove('hidden');
        
        // Calculate time spent in seconds
        const timeSpent = Math.floor((Date.now() - quizData.startTime) / 1000);
        
        const response = await API.post('/quiz/submit', {
          examId: examId,
          answers: quizData.answers,
          timeSpent: timeSpent
        });
        
        // Clear intervals
        if (timerInterval) clearInterval(timerInterval);
        if (autoSaveInterval) clearInterval(autoSaveInterval);
        
        // Remove beforeunload listener
        window.removeEventListener('beforeunload', handleBeforeUnload);
        
        // Clear saved progress
        localStorage.removeItem(`quiz_${examId}`);
        
        const data = response.data || response;
        const resultId = data.result?._id || data.result?.id;
        
        // Redirect to results
        window.location.href = `/pages/results.html?result=${resultId}`;
        
      } catch (error) {
        console.error('Error submitting quiz:', error);
        document.getElementById('loadingOverlay').classList.add('hidden');
        Utils.showToast('Không thể nộp bài. Vui lòng thử lại.', 'error');
      }
    }

    // Fullscreen
    document.getElementById('fullscreenBtn').addEventListener('click', () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        document.getElementById('fullscreenBtn').innerHTML = '<i class="fas fa-compress"></i>';
      } else {
        document.exitFullscreen();
        document.getElementById('fullscreenBtn').innerHTML = '<i class="fas fa-expand"></i>';
      }
    });

    // Prevent page unload
    function handleBeforeUnload(e) {
      e.preventDefault();
      e.returnValue = 'Bạn có chắc muốn thoát? Bài làm của bạn sẽ được lưu tự động.';
      return e.returnValue;
    }

    // Toggle instructions
    function toggleInstructions() {
      const content = document.getElementById('instructionsContent');
      const icon = document.getElementById('instructionsIcon');
      
      content.classList.toggle('hidden');
      icon.classList.toggle('fa-chevron-down');
      icon.classList.toggle('fa-chevron-up');
    }

    // Demo data for testing
    // Initialize
    loadExam();
  </script>
</body>
</html>
